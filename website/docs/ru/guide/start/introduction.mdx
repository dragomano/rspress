# Введение

Rspress — это генератор статических сайтов на базе [Rsbuild](https://rsbuild.rs/), использующий для рендеринга фреймворк React. Он поставляется с готовой темой для документации, благодаря чему вы можете буквально за несколько минут создать полноценный сайт документации. При этом вы можете кастомизировать тему под свои нужды — например, сделать блог, лендинг продукта и т. д. Конечно, подключив официальные плагины, вы также легко сможете собрать документацию для библиотеки компонентов.

## Почему Rspress

Rspress создавался с акцентом на следующие ключевые возможности:

- **Производительность сборки**. Быстрый запуск разработки — залог приятного опыта.
- **Поддержка MDX**. Благодаря MDX можно удобно переиспользовать фрагменты документов и встраивать в них любые React-компоненты.
- **Базовый функционал сайта документации**. Встроенная интернационализация, поддержка нескольких версий, полнотекстовый поиск, документация компонентных библиотек и многое другое.
- **Расширяемость**. Встроенная система плагинов и API для расширения возможностей Rspress.

Именно эти аспекты являются основными требованиями к современным статическим сайтам. Далее мы рассмотрим их подробнее.

### Производительность сборки

По мере роста проекта всё чаще возникает проблема долгого запуска dev-сервера, что заметно ухудшает процесс разработки. Чем дольше длится разработка проекта, тем сильнее это ощущается.

Мы задались вопросом: можно ли выйти за рамки существующих инструментов сообщества, пробить бутылочное горлышко текущих SSG-фреймворков и добиться практически мгновенного старта в большинстве сценариев?

Мы продолжили исследования в этом направлении и в итоге добились такого результата в Rspress.

Если выделить одну самую главную оптимизацию — это, безусловно, **фронтенд-инструментарий на Rust**. Мы используем Rust-инструменты в двух самых критичных по производительности местах:

- **Бандлер**. Традиционные бандлеры — webpack, Rollup и др. — являются центральным узлом всех компиляционных цепочек фронтенд-проекта и сильно влияют на скорость сборки. В Rspress используется разработанный нашей командой **Rspack** — бандлер на Rust с целым набором встроенных оптимизаций (многопоточность, инкрементальная сборка и т. д.). Он в 5–10 раз быстрее традиционных JS-бандлеров.
- **Компилятор Markdown**. Ещё одно узкое место SSG-фреймворков — компиляция Markdown. Мы перенесли этот процесс на Rust, создав собственный компилятор `@rspress/mdx-rs`. Он почти в **20 раз быстрее** аналогов на JavaScript:

<img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/mdx-rs-benchmark.png" />

При этом Rspress использует ещё множество других оптимизаций сборки, например, предварительную сборку темы и т. д. Все эти приёмы в сочетании с мощным Rust-инструментарием поднимают производительность SSG-фреймворка на совершенно новый уровень.

### Поддержка MDX

Чтобы обеспечить максимальную гибкость при написании контента, Rspress изначально поддерживает формат MDX.

MDX — это подход к компонентизации контента. Документы становятся компонентами: их фрагменты можно переиспользовать в разных местах, а внутри Markdown легко встраивать любые кастомные React-компоненты. Это кардинально повышает свободу и удобство работы с документацией.

### Базовые возможности сайта документации

Конечно, мы уделили большое внимание проработке стандартного функционала сайта документации. Rspress «из коробки» поддерживает:

- Автоматическую генерацию структуры сайта: навигационная панель, боковое меню и т. д.
- Генерацию полностью статического сайта — после продакшен-сборки получаем чистый HTML.
- Интернационализацию (i18n) и многоязычные документы.
- Полнотекстовый поиск без дополнительной настройки.
- Управление несколькими версиями документации.
- Полную кастомизацию темы.
- Автоматическую генерацию демо-превью и интерактивной песочницы для компонентов.

Все эти возможности мы подробно разберём далее.

### Механизм расширений

Для максимальной гибкости в Rspress реализован целый набор механизмов расширения:

- Глобальные компоненты, стили и структура страниц → см. [Кастомизация страниц](/guide/basic/custom-page).
- Расширение процесса сборки: собственная конфигурация Rspack, добавление плагинов MDX и др. → см. [Расширение сборки](/guide/advanced/extend-build).
- Полная кастомизация темы → см. [Кастомная тема](/ui/custom-theme).
- Встроенная система плагинов с возможностью писать свои → см. [Система плагинов](/plugin/system/introduction).

## Возможности

Теперь подробно разберём основные функциональные возможности Rspress.

### Автоматическая генерация структуры сайта

При создании сайта документации помимо основного контента обычно нужны следующие элементы интерфейса:

- Навигационная панель — глобальное меню сайта.
- Боковое меню (сайдбар) — оглавление раздела.
- Оглавление текущей страницы — структура заголовков статьи.

**Оглавление страницы** Rspress формирует полностью автоматически: извлекает все заголовки из документа, строит дерево и по умолчанию показывает его справа от текста — никаких дополнительных действий не требуется.

Для **навигационной панели** и **бокового меню** предусмотрено два способа настройки (выбирайте любой):

- **Декларативная конфигурация** — размещение файла `_meta.json` в нужных папках. Пример:

```json title="_meta.json"
["introduction", "install", "start"]
```

Подробности настройки можно найти в разделе [Автоматическое формирование навигации](/guide/basic/auto-nav-sidebar).

- **Программная конфигурация** — задаётся через поля [`nav`](/api/config/config-theme.html#nav) и [`sidebar`](/api/config/config-theme.html#sidebar) в файле `rspress.config.ts`.

В большинстве случаев мы рекомендуем **декларативную конфигурацию** — она даёт несколько важных преимуществ:

1. Конфигурация получается лаконичнее и понятнее.
2. Структура папок на диске полностью соответствует структуре бокового меню — всё интуитивно понятно.
3. При добавлении/удалении пунктов меню достаточно работать прямо в нужной папке, а не лезть каждый раз в `rspress.config.ts`, искать нужное место и править там — это сильно снижает переключение контекста.

Программная конфигурация незаменима, когда нужно генерировать навигацию динамически. Например, официальный плагин Rspress [TypeDoc](/plugin/official-plugins/typedoc) автоматически преобразует JSON от TypeDoc в готовые `nav` и `sidebar`.

### Поддержка MDX

MDX — мощный формат для создания контента. Вы пишете обычный Markdown, но при этом можете прямо внутри него использовать любые React-компоненты:

<img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/mdx-intro.png" />

Кроме того, Rspress поддерживает несколько специальных синтаксисов:

- Кастомные контейнеры.
- FrontMatter-метаданные.
- Подсветка строк кода.

Подробности — в разделе [Использование MDX](/guide/use-mdx/components).

### SSG (статическая генерация)

Rspress — это SSG-фреймворк. При продакшен-сборке он автоматически генерирует полностью статический сайт: для каждой страницы создаётся готовый HTML-файл. После завершения сборки эти файлы появляются в папке вывода.

Готовую папку можно развернуть на любом статическом хостинге: GitHub Pages, Netlify, Vercel и т. д.

При необходимости HTML легко кастомизировать — см. [Генерация статического сайта](/guide/basic/ssg.html 'Генерация статического сайта').

### Интернационализация (i18n)

Многоязычность — частое требование для сайтов документации. В Rspress она реализована максимально просто и удобно. Мы свели все задачи i18n к четырём вопросам:

- Где хранить переводы?
- Как настроить сайт для разных языков?
- Как организовать папки с разными языковыми версиями?
- Как использовать переводы в собственных компонентах?

Все эти сценарии уже решены «из коробки». Достаточно следовать [руководству по i18n](/guide/default-theme/i18n.html 'Руководство по i18n') — и многоязычность готова.

### Документация нескольких версий

Иногда нужно вести документацию для разных версий продукта. В Rspress поддержка мультиверсионности встроена и включается парой строк конфигурации. При этом структура папок остаётся привычной — никаких вложенностей и новых понятий, без лишних сложностей:

```ts
// файл конфигурации
import { defineConfig } from '@rspress/core';

export default defineConfig({
  multiVersion: {
    default: 'v1',
    versions: ['v1', 'v2'],
  },
});
```

```txt
// Структура директорий
docs
├── v1
│   ├── README.md
│   └── guide
│       └── README.md
└── v2
    ├── README.md
    └── guide
```

### Полнотекстовый поиск

Rspress предоставляет полнотекстовый поиск «из коробки» — без единой строки конфигурации. Он построен на открытом движке FlexSearch и работает так:

<img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/rspress-search.png" />

### Кастомизация темы

Rspress поддерживает два способа настройки темы:

1. **Расширение стандартной темы**. Во всех компонентах дефолтной темы предусмотрены слоты, через которые можно добавить собственные элементы интерфейса. Пример:

```tsx
// theme/index.tsx
import Theme from '@rspress/core/theme';
import { NoSSR } from '@rspress/core/runtime';

const Layout = () => <Theme.Layout beforeNavTitle={<p>Кастомный блок</p>} />;

export default {
  ...Theme,
  Layout,
};

export * from '@rspress/core/theme';
```

2. **Полностью настраиваемая тема**. Если нужно написать тему с нуля, вы можете переопределить компонент `Layout` и использовать предоставляемые Rspress Runtime API (например, `usePageData`), чтобы получать данные страницы, информацию о маршрутах и т. д.

Подробно о кастомизации темы — в разделе [Кастомная тема](/ui/custom-theme.html 'Кастомная тема').

### Система плагинов

Система плагинов — одна из ключевых возможностей Rspress. Она позволяет легко расширять функциональность при сборке сайта. Подробности — в разделе [Введение в плагины](/plugin/system/introduction.html 'Введение в плагины').

### Документация компонентов

#### Превью демо

Rspress предоставляет [официальный плагин preview](/plugin/official-plugins/preview 'плагин preview'), который автоматически генерирует превью компонентов. После подключения плагина достаточно добавить в MDX-файле такой блок кода:

```tsx
import React from 'react';
import { Tag, Space } from '@arco-design/web-react';
import '@arco-design/web-react/dist/css/arco.css';
const COLORS = [
  'red',
  'orangered',
  'orange',
  'gold',
  'lime',
  'green',
  'cyan',
  'blue',
  'arcoblue',
  'purple',
  'pinkpurple',
  'magenta',
  'gray',
];

export default () => {
  return (
    <Space>
      {COLORS.map((color, i) => (
        <Tag key={i} color={color}>
          {color}
        </Tag>
      ))}
    </Space>
  );
};
```

Тогда в документации появится такое превью:

![](https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/demo-preview.png)

Конечно, плагин поддерживает и мобильный режим превью — его можно включить в конфигурации:

![](https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/demo-preview-mobile.png)

#### Интерактивная песочница в реальном времени

Для документации компонентов возможность редактировать код прямо на странице сильно повышает интерактивность.

Для этого достаточно подключить официальный [плагин playground](/plugin/official-plugins/playground.html 'плагин playground') и объявить тот же блок кода в `.mdx`-файле (как в примере выше).

В результате вы получите вот такую песочницу прямо в документации:

![](https://lf3-static.bytednsdoc.com/obj/eden-cn/uhbfnupenuhf/rspress/demo-playground.gif)

### Встроенные плавные переходы между страницами

Современные браузеры предоставляют нативный [View Transition API](https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API 'View Transition API') для анимаций при смене страниц. В Rspress мы сразу подхватили эту возможность: переходы между страницами реализованы именно через View Transition, без каких-либо сторонних SPA-библиотек анимации. В дальнейшем планируем добавить ещё больше эффектов, чтобы сделать навигацию ещё приятнее.

```ts
export default defineConfig({
  themeConfig: {
    // Включаем анимацию View Transition
    enableContentAnimation: true,
    enableAppearanceAnimation: true,
  },
});
```

## Чем Rspress отличается от других SSG-фреймворков

### Отличия от Docusaurus

[Docusaurus](https://docusaurus.io/ 'Docusaurus') — открытый SSG-фреймворк от Meta. Как и Rspress, он использует React и поддерживает MDX. Основные отличия:

1. Rspress по умолчанию использует компилятор [mdx-rs](https://github.com/web-infra-dev/mdx-rs) на Rust — это даёт заметно выше производительность сборки (см. раздел [Производительность сборки](#build-performance)).

2. У Rspress проще конфигурация и ниже порог входа. Мы стараемся не вводить лишних концепций и максимально снизить когнитивную нагрузку. Например, поиск работает «из коробки», мультиверсионность интуитивна и т. д.

3. Rspress предоставляет более высокоуровневую абстракцию над бандлером. Конфиги webpack/Rspack сложны и запутанны. Docusaurus передаёт их напрямую пользователю, а Rspress скрывает низкоуровневые детали и предлагает удобные обёртки. Например, добавить теги в `<head>` можно одной строкой `builderConfig.html.tags`, без подключения `html-webpack-plugin` и прочих плагинов.

### Отличия от Nextra

[Nextra](https://nextra.vercel.app/ 'Nextra') — открытый SSG-фреймворк от Vercel. Он тоже построен на React и поддерживает MDX. Главные отличия:

1. У Rspress выше производительность сборки (см. отличия от Docusaurus).
2. Rspress легче и «чище». Nextra построен поверх Next.js, поэтому даже в режиме SSG генерирует не только HTML, но и runtime-код Next.js. В результате размер выходных файлов больше, а деплоить нужно как приложение (`next start`), а не как чистую статику. Rspress не привязан к какому-либо фреймворку — выводит лёгкие чистые HTML-файлы, которые можно развернуть где угодно.

### Отличия от VitePress

[VitePress](https://vitepress.dev/ 'VitePress') — генератор статических сайтов на базе Vite, использует Vue и обладает отличной производительностью. Основные отличия:

1. Rspress использует React, VitePress — Vue.
2. Rspress работает с MDX, VitePress — с обычным Markdown + Vue-компонентами внутри. Это приводит к разным цепочкам компиляции.
3. На этапе разработки оба стартуют очень быстро. Но в продакшене VitePress использует Rollup для бандлинга, поэтому сталкивается с типичными ограничениями JS-инструментов. Rspress на основе Rspack (Rust) собирает продакшен-сборку ощутимо быстрее.

## Попробуйте Rspress

Перейдите в раздел [Быстрый старт](/guide/start/getting-started), чтобы за несколько минут собрать свой первый сайт документации.
