# Мультиязычность

Чтобы в Rspress реализовать документацию на нескольких языках, нужно выполнить следующее:

1. Определить данные текстов I18n.
2. Настроить `locales` и `themeConfig.locales`.
3. Настроить язык по умолчанию.
4. Создать документы в разных языковых версиях.
5. Настроить sidebar и navbar.
6. Использовать `useI18n` в собственных компонентах.

## Определение текстовых данных I18n

Создайте новый файл `i18n.json` в текущем рабочем пространстве, структура каталогов выглядит следующим образом:

```txt
.
├── docs
├── i18n.json
├── package.json
├── tsconfig.json
└── rspress.config.ts
```

В этом JSON-файле вы можете определить текстовые строки, которые необходимо переводить. Определение типа выглядит следующим образом:

```ts
export interface I18n {
  // key: идентификатор
  [key: string]: {
    // key: язык
    [key: string]: string;
  };
}
```

Например:

```json title="i18n.json"
{
  "gettingStarted": {
    "en": "Getting Started",
    "ru": "Подготовка"
  },
  "features": {
    "en": "Features",
    "ru": "Возможности"
  },
  "guide": {
    "en": "Guide",
    "ru": "Руководство"
  }
}
```

Эти текстовые данные используются как в **файле конфигурации**, так и в **пользовательских компонентах** — об этом подробнее будет рассказано далее.

## Настройка `locales`

В файле `rspress.config.ts` параметр `locales` используется для указания `lang`, `title`, `description` и другой информации о сайте — в основном это метаданные самого сайта.

```ts title="rspress.config.ts"
import { defineConfig } from '@rspress/core';

export default defineConfig({
  // locales — массив объектов
  locales: [
    {
      lang: 'en',
      // Метка в панели навигации для переключения языков
      label: 'English',
      title: 'Rspress',
      description: 'Static Site Generator',
    },
    {
      lang: 'ru',
      label: 'Русский',
      title: 'Rspress',
      description: 'Генератор статических сайтов',
    },
  ],
});
```

:::tip Примечание

`themeConfig.locales` также содержит все те же поля, что и `locales`. Однако в будущих версиях этот параметр будет удалён — пожалуйста, используйте `locales`.

:::

По остальным параметрам темы, связанным с мультиязычностью, смотрите [тип API](/api/config/config-theme#locales).

## Настройка языка по умолчанию

После настройки данных `locales` необходимо указать язык по умолчанию с помощью параметра [lang](/api/config/config-basic#lang). Пример ниже:

```ts title="rspress.config.ts"
import { defineConfig } from '@rspress/core';

export default defineConfig({
  lang: 'ru',
});
```

Это важно, потому что **для маршрутов на языке по умолчанию Rspress убирает префикс языка**. Например, `/ru/guide/getting-started` превратится в `/guide/getting-started`.

## Создание документов на разных языках

После выполненных выше настроек можно приступать к созданию документов на разных языках. Это очень просто — достаточно создать следующую структуру в корневой папке документации:

```txt
docs
├── en
│   ├── api
│   │   └── index.md
│   └── guide
│       └── getting-started.md
│       └── features.md
└── ru
    ├── api
    │   └── index.md
    └── guide
        └── getting-started.md
        └── features.md
```

Как видно, файлы мы размещаем в папках `en` и `ru` внутри каталога `docs` — так удобно различать версии на разных языках.

## Настройка файла `_meta.json`

С помощью файла `_meta.json` можно задать содержимое панели навигации и сайдбара. Подробности — в разделе [Автоматическое формирование навигации](/guide/basic/auto-nav-sidebar).

### Настройка навигации

В конфигурации `_meta.json` для панели навигации можно указывать `text` в виде ключа i18n, например:

```json title="_meta.json"
[
  {
    "text": "guide",
    "link": "/guide/start/getting-started",
    "activeMatch": "/guide/"
  }
]
```

Здесь `text` — это `guide`. Это значение будет автоматически переведено как `Руководство` или `Guide` в зависимости от текущего языка.

### Настройка сайдбара

В конфигурации `_meta.json` для сайдбара можно указывать `label` в виде ключа i18n, например:

```json title="_meta.json"
[
  {
    "type": "dir",
    "name": "start",
    "label": "gettingStarted"
  }
]
```

Здесь `label` — это `gettingStarted`. Это значение будет автоматически переведено как `Подготовка` или `Getting Started` в зависимости от текущего языка.

## Использование `useI18n` в собственных компонентах

При разработке MDX или собственной темы часто приходится писать пользовательские компоненты, которым тоже нужны переведённые тексты. Как их получить?

import UseI18n from '../../fragments/useI18n.mdx';

<UseI18n />
